'use strict';

var _extends = require('babel-runtime/helpers/extends')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

Object.defineProperty(exports, '__esModule', {
    value: true
});

var _run = require('./run');

var _run2 = _interopRequireDefault(_run);

exports['default'] = function (buildPath) {
    var opts = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

    if (!opts.workspace && !opts.project) {
        throw new Error('You must provide a workspace OR project');
    }

    var schemes = [];
    var myOpts = _extends({}, opts, { stdout: function stdout(line) {
            if (opts.stdout) {
                opts.stdout(line);
            }

            if (!line.match(/ {8}/)) {
                return;
            }

            schemes.push(line.trim());
        } });

    // Remove options not compatible with `-list`
    delete myOpts.derivedDataPath;

    return (0, _run2['default'])(buildPath, myOpts, '-list').then(function () {
        return schemes;
    });
};

module.exports = exports['default'];